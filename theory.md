Основные понятия БЭМ в рамках SLCF-проекта
=========

**БЭМ-сущность** – блок / элемент / модификатор блока или элемента

**Технология** – описание БЭМ-сущности на каком-либо языке (css, less, js, xml, png, psd, md ...)

**Декларация БЭМ-сущности** - описание именованной сущности в наборе технологий.

**Библиотека** – коллекция деклараци	й БЭМ-сущностей.

**БЭМ-дерево** – структурная композиция из экземпляров БЭМ-сущностей (предполагается, что сущности задекларированы).

**Бандл** – связка близких по смыслу деклараций и/или деревьев, независимая или имеющая зависимости от других бандлов.

**Группа бандлов** – объединение бандлов по какому-либо признаку. В типовом SLCF-проекте есть две группы бандлов: проектные и внешние.


## Зависимости

Зависимость – подключение сущности из библиотеки [стороннего] бандла. Зависимости выражаются в какой-либо технологии. В рамках бандла можно выделить следующие списки зависимостей:

**Авто-зависимости** – список сущностей собственной библиотеки бандла.

**Внешние зависимости** – список зависимостей от внешних бандлов. Может включать коллекции зависимостей (ссылка на авто-зависимости стороннего бандла).

**Используемые зависимости** – список зависимостей, полученный после проверки на использование в БЭМ-деревьях бандла.

**Исключительные зависимости** – список зависимостей, которые не
содержатся в БЭМ-деревьях, однако должны быть включены в сборку.

**Итоговые зависимости** – окончательный список зависимостей бандла, отсортированный в порядке приоритета. Приоритет определяется порядком подключения зависимостей, а также принятыми соглашениями.

**Уровень переопределения** – приоритезированная библиотека (в системе зависимостей бандла).

**Приоритеты модификаторов** – способ разрешения конфликтов между модификаторами в случае их перекрытия по технологии на одном узле БЭМ-дерева.


## Приоритеты БЭМ-сущностей

Блок НЕ ДОЛЖЕН быть приоритетнее другого блока (в рамках уровня переопределения).

Модификатор блока всегда ДОЛЖЕН быть приоритетнее блока самого по себе.

Модификатор блока МОЖЕТ быть приоритетнее другого модификатора этого же блока согласно принятому соглашению (в случае такого соглашения, его правила действуют одинаково на все блоки).

Блок с модификатором НЕ ДОЛЖЕН быть приоритетней другого блока, самого по себе, или с модификатором (в рамках уровня переопределения).

Количество модификаторов блока не влияет на его приоритет перед другими блоками.

Блок с высокого уровня ДОЛЖЕН быть приоритетнее этого же блока с низкого уровня.

Блок  с высокого уровня НЕ МОЖЕТ быть приоритетнее других блоков с низких уровней.

Блок с модификатором, с  высокого уровня, ДОЛЖЕН быть приоритетнее этого же блока с этим же модификатором, с низких уровней.

Блок с модификатором, с высокого уровня, НЕ МОЖЕТ быть приоритетнее другого блока, самого по себе или с модификатором, с низких уровней.

В данном разделе под блоком СЛЕДУЕТ понимать как непосредственно блок, так и элементы блока, все, что справедливо для блока, также справедливо и для элементов блока.

Таким образом, приоритет существует:
- между модификаторами одного блока
- для одной сущности с разных уровней.


### Примеры приоритетов

Знак "?" означает, что приоритет узнать нельзя.

Знак "<" указывает на приоритет (кто больше, тот и сильнее).

Цифра в скобках – уровень на котором определена сущность.


##### 1. Равнозначные пары

{A,B} = {B,A}, A < B (порядок следования CSS-правил может быть любым).


b-section ? b-news

b-link ? b-product__title

b-section__title ? b-section__body

b-section_viewtype_promo ? b-news

b-link_type_pseudo ? b-product__title

b-section_viewtype_promo ? b-news_content_finance

b-link_type_pseudo ? b-product__title_type_discount

Для подобных случаев не гарантируется какой-либо заранее известный порядок следования.


##### 2. Априори приоритетные пары

{A,B} != {B,A}, A < B (порядок следования строго определен и не зависит от дополнительных соглашений).


b-section < b-section__body

b-link < b-link_type_pseudo


##### 3. Приоритные по соглашению пары

{A,B} != {B,A}, A < B [ {P} (порядок следования строго определен, но зависит от дополнительного соглашения).

Пример соглашения: P = {type, viewtype, content}.

b-link_type_pseudo < b-link_viewtype_context

b-link_type_pseudo < b-link_content_more-details

b-link_viewtype_context < b-link_content_more-details


##### 4. Приоритет между парами с разных уровней

{A1, A2}, L(1) < L(2).

Пример соглашения: P = {type, viewtype, content}.


**4.1 Один блок**

b-section(1) < b-section(2)

b-section__title(1) < b-section__title(2)


**4.2 Разные блоки**

b-section(1) ? b-news(2)

b-section__body(1) ? b-section__title(2)


**4.3 Блок и модификатор блока**

b-section(1) < b-section_viewtype_promo(2)

b-section(2) < b-section_viewtype_promo(1)


**4.4 Блок и модификатор другого блока**

b-news(1) ? b-section_viewtype_promo(2)

b-news(2) ? b-section_viewtype_promo(1)

b-product__title (1) ? b-link_type_pseudo(2)

b-product__title (2) ? b-link_type_pseudo(1)


**4.5 Модификатор блока**

b-section_viewtype_promo(1) < b-section_viewtype_promo(2)

b-product__title_type_old(1) < b-product__title_type_old(2)


**4.6 Одинаковые модификаторы разных блоков**

b-section_content_events(1) ? b-news_content_finance(2)

b-section__header_viewtype_promo(1) ? b-section__body_viewtype_promo(2)


**4.7 Разные модификаторы одного блока**

b-section_viewtype_promo(1) < b-section_content_events(2)

b-section_viewtype_promo(2) < b-section_content_events(1)

b-product__title_type_old(1) < b-product__title_content_cloud(2)

b-product__title_type_old(2) < b-product__title_content_cloud(1)
